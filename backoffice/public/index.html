<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Starter Snowpack App" />
  <title>Starter Snowpack App</title>
</head>

<body>
  <div id="root"></div>
  <script type="module">
    import {render, h, useReducer, useState} from "%PUBLIC_URL%/dist/h.js";
    import {Router, Route, Link} from "%PUBLIC_URL%/dist/router.js";
    const b = (props, children) => {
      return h(
        "div",
        {},
        h(
          "div",
          props,
          h(
            "p",
            {},
            "this content should stay static while the rest of the page updates"
          ),
          children
        )
      );
    };
    const reducer = (state, action) => {
      switch (action) {
        case "+":
          return state + 1;
        case "-":
          return state - 1;
        default:
          return state;
      }
    };
    const a = () => {
      const [counter, dispatch] = useReducer(reducer, 0);

      return h(
        "div",
        {className: "testclass"},
        h("button", {onClick: () => dispatch("+")}, "+"),
        h("button", {onClick: () => dispatch("-")}, "-"),
        h("h1", {}, "counter: ", counter)
      );
    };

    const c = ({initial}) => {
      const [items, setItems] = useState(initial);
      return h(
        "div",
        {},
        h(
          "ul",
          {},
          items.map((item) => h("li", {}, item)),
          h(
            "button",
            {
              onClick: () =>
                setItems(items.concat(`item #${items.length + 1}`)),
            },
            "add an item"
          )
        )
      );
    };

    render(
      h(
        Router,
        {},
        h(Route, {
          path: /^\/$/, element: h('div', {},
            h('h1', {}, 'index'),
            h(Link, {to: '/test'}, 'go to test'),
            h(
              b,
              {className: "b-class"},
              h(a, {}),
              h(c, {initial: ["item #1"]})
            ))
        }),
        h(Route, {path: "/test", element: h('h1', {}, 'test', h(Link, {to: '/', as: 'button'}, 'back'))}),
        h(Route, {path: /.*/, element: h('h1', {}, '404 - Not Found', h(Link, {to: '/'}, 'back to index'))}),
      ),
      document.getElementById("root")
    );
  </script>
</body>
</hmtl>
